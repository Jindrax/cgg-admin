(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"7etm":function(e,a,t){a=e.exports=t("I1BE")(!1),a.push([e.i,"",""])},C2IC:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("q-page",{staticClass:"flex flex-top"},[t("q-card",{staticStyle:{width:"100%"}},[t("q-card-title",[e._v("\n      Cargar Saldo\n    ")]),t("q-card-separator"),t("q-card-main",[t("q-field",{attrs:{label:"Nombre de usuario"}},[t("q-input",{model:{value:e.username,callback:function(a){e.username=a},expression:"username"}})],1),t("br"),t("q-field",{attrs:{label:"Saldo"}},[t("q-input",{model:{value:e.saldo,callback:function(a){e.saldo=a},expression:"saldo"}})],1),t("br"),t("q-btn",{staticStyle:{width:"100%"},attrs:{icon:"create",label:"Cargar",color:"primary"},on:{click:e.charge}})],1)],1),t("br"),null!=e.tableData?t("q-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,columns:e.columns,"row-key":"fecha"},scopedSlots:e._u([{key:"body",fn:function(a){return t("q-tr",{attrs:{props:a}},[t("q-td",{key:"fecha",attrs:{props:a}},[e._v("\n        "+e._s(e.formatFecha(a.row.fecha))+"\n      ")]),t("q-td",{key:"operario",attrs:{props:a}},[e._v("\n        "+e._s(a.row.operario.username)+"\n      ")]),t("q-td",{key:"cliente",attrs:{props:a}},[e._v("\n        "+e._s(a.row.cliente.username)+"\n      ")]),t("q-td",{key:"valor",attrs:{props:a}},[t("q-chip",{attrs:{small:"",square:"",color:"green"}},[e._v(e._s(a.row.valor))])],1),t("q-td",{key:"valor_promocional",attrs:{props:a}},[e._v("\n        "+e._s(a.row.valor_promocional)+"\n      ")])],1)}}])}):e._e()],1)},o=[];r._withStripped=!0;var l=t("wd/R");l.locale("es");var n={name:"PageIndex",props:["socket","usuario"],data:function(){return{username:"",saldo:0,columns:[{name:"fecha",required:!0,label:"Fecha",align:"left",field:"fecha",sortable:!0,style:"width: 500px"},{name:"operario",required:!0,label:"Operario",align:"left",field:"operario",sortable:!1,style:"width: 500px"},{name:"cliente",required:!0,label:"Cliente",align:"left",field:"cliente",sortable:!0,style:"width: 500px"},{name:"valor",required:!0,label:"Valor",align:"left",field:"valor",sortable:!0,style:"width: 500px"},{name:"valor_promocional",required:!0,label:"Valor Promocional",align:"left",field:"valor_promocional",sortable:!0,style:"width: 500px"}],tableData:null}},mounted:function(){this.update()},methods:{charge:function(){var e=this;this.socket.get("/cliente",{username:this.username},function(a,t){if(200==t.statusCode)if(a.length>0){var r={operario:e.usuario.id,cliente:a[0].id,valor_recibido:e.saldo};e.socket.post("/addcredit",r,function(a,t){200==t.statusCode&&(e.username="",e.saldo=0),e.update(),e.$q.notify(a)})}else e.username="",e.saldo=0,e.$q.notify("El cliente no se encuentra registrado en el sistema");else e.$q.notify(a)})},update:function(){var e=this;this.socket.get("/cobro?sort=createdAt%20DESC&limit=30&populate=operario,cliente",null,function(a,t){200==t.statusCode&&(e.tableData=a)})},formatFecha:function(e){return l(e).format("LLL")}}},s=n,i=(t("Xsnc"),t("KHd+")),c=Object(i["a"])(s,r,o,!1,null,null,null);c.options.__file="Charge.vue";a["default"]=c.exports},DqTs:function(e,a,t){var r=t("7etm");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var o=t("SZ7m").default;o("4ed725c4",r,!1,{sourceMap:!1})},Xsnc:function(e,a,t){"use strict";var r=t("DqTs"),o=t.n(r);o.a}}]);