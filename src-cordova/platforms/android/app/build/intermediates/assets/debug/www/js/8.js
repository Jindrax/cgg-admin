(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"5Ajd":function(t,e,a){"use strict";var i=a("cLPV"),n=a.n(i);n.a},B8SX:function(t,e,a){e=t.exports=a("I1BE")(!1),e.push([t.i,"",""])},S6sP:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"flex flex-top"},[a("q-card",{staticStyle:{width:"30%"}},[a("q-card-title",[t._v("\n      Nueva Venta\n    ")]),a("q-card-separator"),a("q-card-main",[a("q-field",{attrs:{label:"Descripcion"}},[a("q-select",{attrs:{options:t.getOpciones()},model:{value:t.seleccionado,callback:function(e){t.seleccionado=e},expression:"seleccionado"}})],1),a("br"),a("q-field",{attrs:{label:"Unidades"}},[a("q-input",{model:{value:t.unidades,callback:function(e){t.unidades=e},expression:"unidades"}})],1),a("br"),a("q-btn",{staticStyle:{width:"100%"},attrs:{icon:"create",label:"AÃ±adir",color:"primary"},on:{click:t.addItem}})],1)],1),a("div",{staticStyle:{width:"70%"}},[null!=t.tableData?a("q-table",{attrs:{title:"Inventario",data:t.tableData,columns:t.columns,"row-key":"descripcion",pagination:t.pagination},on:{"update:pagination":function(e){t.pagination=e}}}):t._e(),a("q-btn",{staticStyle:{width:"100%"},attrs:{icon:"monetization_on",label:"Pagar "+t.total+" pesos",color:"primary"},on:{click:t.newSale}})],1)],1)},n=[];i._withStripped=!0;var o=a("wd/R");o.locale("es");var l={name:"PageIndex",props:["socket","usuario"],data:function(){return{pagination:{sortBy:"equipo",rowsPerPage:0},descripcion:"",unidades:0,seleccionado:null,inventario:[],columns:[{name:"item",required:!0,label:"Item",align:"left",field:"item",sortable:!0,style:"width: 500px"},{name:"unidades",required:!0,label:"Unidades",align:"left",field:"unidades",sortable:!1,style:"width: 500px"},{name:"valor_total",required:!0,label:"Precio",align:"left",field:"valor_total",sortable:!0,style:"width: 500px"}],tableData:[]}},mounted:function(){this.update()},computed:{total:function(){return this.tableData.reduce(function(t,e){return t+e.valor_total},0)},utilidad:function(){return this.tableData.reduce(function(t,e){return t+e.utilidad_total},0)}},methods:{newSale:function(){var t=this,e=Date.now(),a=this.tableData;this.socket.post("/newsale",{fecha:e,items:a,total:this.total,utilidad:this.utilidad,vendedor:this.usuario.id},function(e,a){200!=a.statusCode?t.$q.notify(e):(t.tableData=[],t.$q.notify(e),t.update())})},update:function(){var t=this;this.socket.get("/item",null,function(e,a){200==a.statusCode&&(t.inventario=e)})},getOpciones:function(){return this.inventario.length>0?this.inventario.map(function(t,e){return{label:t.descripcion,value:e}}):[]},addItem:function(){var t=this,e=this.inventario[this.seleccionado];this.socket.post("/checkstock",{itemID:e.id,unidades:this.unidades},function(a,i){200==i.statusCode?(t.tableData.push({id:e.id,item:e.descripcion,unidades:t.unidades,precio:e.precio_venta,valor_total:e.precio_venta*t.unidades,utilidad_total:(e.precio_venta-e.precio_compra)*t.unidades}),t.seleccionado=null,t.unidades=0):t.$q.notify(a)})}}},s=l,d=(a("5Ajd"),a("KHd+")),c=Object(d["a"])(s,i,n,!1,null,null,null);c.options.__file="Venta.vue";e["default"]=c.exports},cLPV:function(t,e,a){var i=a("B8SX");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("SZ7m").default;n("558063ac",i,!1,{sourceMap:!1})}}]);